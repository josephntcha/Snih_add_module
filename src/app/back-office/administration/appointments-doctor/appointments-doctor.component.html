<div class="appointments-container">
  <div *ngFor="let availability of availabilities" class="appointment-section">
    <div class="appointment-header">
      <h3 class="date-title">
        Liste des RDV pour le {{ availability.appointments[0]?.date | date:'fullDate':'':'fr' }}
      </h3>
    </div>

    <div class="table-responsive">
      <nz-table 
        #basicTable 
        [nzData]="availability.appointments" 
        [nzBordered]="true"
        [nzScroll]="{ x: '800px' }"
        nzSize="middle"
        class="responsive-table">
        <thead>
          <tr>
            <th nzLeft nzWidth="60px">#</th>
            <th nzWidth="120px">Nom</th>
            <th nzWidth="120px">Pr√©nom</th>
            <th nzWidth="200px">Email</th>
            <th nzWidth="150px">Date</th>
            <th nzWidth="100px">Statut</th>
            <th *ngIf="rightConfirm || rightPostpone || rightCancel" 
                nzRight 
                nzWidth="200px">
              Actions
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let appointment of availability.appointments; let i = index">
            <td nzLeft>{{ i + 1 }}</td>
            <td>{{ appointment.patientLastName }}</td>
            <td>{{ appointment.patientFirstName }}</td>
            <td>{{ appointment.patientEmail }}</td>
            <td>{{ appointment.date | date:'d MMMM y':'':'fr'}}</td>
            <td>
              <nz-tag
                [nzColor]="getStatusColor(appointment.status)">
                {{ getStatusLabel(appointment.status) }}
              </nz-tag>
            </td>
            <td nzRight class="action-buttons">
              <button 
                *ngIf="rightConfirm && (appointment.status === 'ASKED' || appointment.status === 'POSTPONE')" 
                nz-button 
                nzType="primary" 
                nzSize="small" 
                (click)="showConfirmationDialog(appointment)">
                Confirmer
              </button>
              <button 
                *ngIf="rightPostpone && (appointment.status === 'ASKED' || appointment.status === 'POSTPONE')" 
                nz-button 
                class="postpone-btn" 
                nzSize="small" 
                (click)="showpostponeDialog(appointment)">
                Reporter
              </button>
              <button 
                *ngIf="rightCancel && (appointment.status === 'ASKED' || appointment.status === 'POSTPONE')" 
                nz-button 
                class="cancel-btn" 
                nzSize="small" 
                (click)="showdeleteDialog(appointment)">
                Annuler
              </button>
            </td>
          </tr>
        </tbody>
      </nz-table>
    </div>
  </div>
</div>
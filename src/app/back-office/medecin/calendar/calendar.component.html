<div class="calendar-container">
  <div class="calendar-header">
    <div class="navigation-group">
      <button nz-button nzShape="circle" (click)="previousMonth()" class="nav-button">
        <i nz-icon nzType="left"></i>
      </button>
      <span class="month-title">{{ currentMonth | date: 'MMMM y':'':'fr'}}</span>
      <button nz-button nzShape="circle" (click)="nextMonth()" class="nav-button">
        <i nz-icon nzType="right"></i>
      </button>
    </div>

    <form [formGroup]="Hospitalform" class="hospital-form">
      <nz-select formControlName="hospital" nzShowSearch>
        <nz-option *ngFor="let hospital of hospitals" 
                  [nzLabel]="hospital.name" 
                  [nzValue]="hospital.id">
        </nz-option>
      </nz-select>
    </form>
  </div>

  <div class="calendar-table-container">
    <nz-table nzBordered class="calendar-table">
      <thead>
        <tr>
          <th class="calendar-header-cell">Dim</th>
          <th class="calendar-header-cell">Lun</th>
          <th class="calendar-header-cell">Mar</th>
          <th class="calendar-header-cell">Mer</th>
          <th class="calendar-header-cell">Jeu</th>
          <th class="calendar-header-cell">Ven</th>
          <th class="calendar-header-cell">Sam</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let week of weeks">
          <td *ngFor="let day of week"
              [class.other-month]="isOtherMonth(day)"
              [class.availability]="hasAvailability(day)"
              (click)="onAppointmentClick(day)"
              class="calendar-cell">
            <div class="day-content">
              <span class="day-number">{{ day ? day.getDate() : '' }}</span>
              
              <div class="appointments-info" *ngIf="hasAvailability(day)">
                <span *ngIf="getAppointmentCount(day).follow > 0"
                      class="appointments-count follow">
                  {{ getAppointmentCount(day).follow }} suivi
                </span>
                <span *ngIf="getAppointmentCount(day).notFollow > 0"
                      class="appointments-count not-follow">
                  {{ getAppointmentCount(day).notFollow }} RDV
                </span>
                <span class="availability-time" *ngIf="getAvailabilityTime(day) as time">
                  {{ time }}
                </span>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </nz-table>
  </div>
</div>